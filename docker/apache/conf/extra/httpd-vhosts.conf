<VirtualHost *:80>
    ServerName learn-vue3.mimsso.co.kr

    DocumentRoot "/usr/local/apache2/htdocs"

    <Directory "/usr/local/apache2/htdocs">
        AllowOverride All
        Require all granted
    </Directory>

    # PHP-FPM 컨테이너로 PHP 요청 전달
    ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://php:9000/var/www/html/public/$1

    ErrorLog "logs/learn-vue3-error.log"
    CustomLog "logs/learn-vue3-access.log" common
</VirtualHost>

<VirtualHost *:443>
    ServerName learn-vue3.mimsso.co.kr
    DocumentRoot "/usr/local/apache2/htdocs"

    SSLEngine on
    SSLCertificateFile "/usr/local/apache2/certs/learn-vue3.crt"
    SSLCertificateKeyFile "/usr/local/apache2/certs/learn-vue3.key"

    <Directory "/usr/local/apache2/htdocs">
        AllowOverride All
        Require all granted
    </Directory>

    ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://php:9000/var/www/html/public/$1

    ErrorLog "logs/learn-vue3-ssl-error.log"
    CustomLog "logs/learn-vue3-ssl-access.log" common
</VirtualHost>